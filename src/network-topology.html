<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆå›³ â€” AKIBAãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹</title>
<script src="https://unpkg.com/vis-network@9.1.9/standalone/umd/vis-network.min.js"></script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', 'Hiragino Sans', sans-serif; background: #0f172a; color: #e2e8f0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

  #header {
    padding: 12px 20px;
    background: #1e293b;
    border-bottom: 1px solid #334155;
    flex-shrink: 0;
  }
  #header h1 { font-size: 15px; font-weight: 700; color: #f1f5f9; }
  #header p  { font-size: 11px; color: #64748b; margin-top: 3px; }

  #legend {
    display: flex; flex-wrap: wrap; gap: 14px; align-items: center;
    padding: 8px 20px;
    background: #1e293b;
    border-bottom: 1px solid #334155;
    font-size: 11px;
    flex-shrink: 0;
  }
  .leg { display: flex; align-items: center; gap: 6px; color: #94a3b8; }
  .ldot { width: 12px; height: 12px; border-radius: 2px; flex-shrink: 0; }
  .leg-icon { width: 22px; height: 22px; object-fit: contain; flex-shrink: 0; }

  #network-wrap { flex: 1; position: relative; min-height: 0; }
  #mynetwork { width: 100%; height: 100%; }

  /* Info panel */
  #info {
    position: absolute; bottom: 16px; right: 16px;
    width: 400px; max-height: 400px; overflow-y: auto;
    background: rgba(15,23,42,0.95);
    border: 1px solid #475569;
    border-radius: 8px;
    padding: 16px 18px;
    font-size: 13px;
    display: none;
    z-index: 10;
    backdrop-filter: blur(4px);
  }
  #info h3 { font-size: 15px; font-weight: 700; color: #f1f5f9; margin-bottom: 8px; border-bottom: 1px solid #334155; padding-bottom: 6px; }
  #info .row { display: flex; gap: 8px; margin: 5px 0; color: #94a3b8; }
  #info .row b { color: #cbd5e1; min-width: 64px; }
  #info-close { float: right; cursor: pointer; color: #64748b; font-size: 14px; line-height: 1; margin-left: 8px; }
  #info-close:hover { color: #e2e8f0; }

  #hint {
    position: absolute; bottom: 16px; left: 16px;
    background: rgba(30,41,59,0.9);
    border: 1px solid #334155;
    border-radius: 6px;
    padding: 7px 12px;
    font-size: 11px;
    color: #64748b;
  }
</style>
</head>
<body>

<div id="header">
  <h1>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆå›³ â€” AKIBAãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ï¼ˆ2026-03ï¼‰</h1>
  <p>å‡ºå…¸: å®Ÿæ©Ÿã‚¹ã‚­ãƒ£ãƒ³ 2026-02-26 ï¼ ADèª¿æŸ» 2026-02-28 ï¼ æ‹ ç‚¹ãƒãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹ ï¼ ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã‚ºãƒ¼ãƒ ãƒ»ãƒ‰ãƒ©ãƒƒã‚°ã§ãƒ‘ãƒ³</p>
</div>

<div id="legend">
  <div class="leg"><div class="ldot" style="background:#ef4444"></div>å¢ƒç•ŒFW/VPNãƒãƒ–</div>
  <div class="leg"><div class="ldot" style="background:#1d4ed8"></div>æ‹ ç‚¹ã‚µã‚¤ãƒˆ</div>
  <div class="leg"><img class="leg-icon" data-type="gw" alt="">VPN GW (VarioSecure VSR)</div>
  <div class="leg"><img class="leg-icon" data-type="server" alt="">ã‚µãƒ¼ãƒ / NAS</div>
  <div class="leg"><img class="leg-icon" data-type="switch" alt="">ã‚¹ã‚¤ãƒƒãƒ</div>
  <div class="leg"><img class="leg-icon" data-type="ap" alt="">ç„¡ç·šAP</div>
  <div class="leg"><img class="leg-icon" data-type="mfp" alt="">MFPï¼ˆè¤‡åˆæ©Ÿï¼‰</div>
  <div class="leg"><img class="leg-icon" data-type="secom" alt="">SECOM å…¥é€€å®¤ã‚²ãƒ¼ãƒˆ</div>
  <div class="leg"><img class="leg-icon" data-type="unknown" alt="">ä¸æ˜ / è¦èª¿æŸ»</div>
  <div class="leg" style="margin-left:auto; color:#475569">â”€â”€ å®Ÿç·š: LANã€€- - ç ´ç·š: VPN</div>
</div>

<div id="network-wrap">
  <div id="mynetwork"></div>
  <div id="info">
    <span id="info-close" onclick="this.parentElement.style.display='none'">âœ•</span>
    <h3 id="info-title"></h3>
    <div id="info-body"></div>
  </div>
  <div id="hint">ğŸ’¡ é’ã„æ‹ ç‚¹ãƒãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹ / åç´</div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const C = {
  internet:  { bg:'#4c1d95', border:'#6d28d9', font:'#ddd6fe' },
  fortigate: { bg:'#7f1d1d', border:'#ef4444', font:'#fca5a5' },
  site:      { bg:'#1e3a8a', border:'#3b82f6', font:'#bfdbfe' },
  gw:        { bg:'#7c2d12', border:'#f97316', font:'#fed7aa' },
  server:    { bg:'#0c4a6e', border:'#0ea5e9', font:'#bae6fd' },
  switch:    { bg:'#14532d', border:'#22c55e', font:'#bbf7d0' },
  ap:        { bg:'#581c87', border:'#a855f7', font:'#e9d5ff' },
  mfp:       { bg:'#831843', border:'#ec4899', font:'#fbcfe8' },
  secom:     { bg:'#78350f', border:'#f59e0b', font:'#fde68a' },
  unknown:   { bg:'#1e293b', border:'#475569', font:'#94a3b8' },
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SVGã‚¢ã‚¤ã‚³ãƒ³ï¼ˆä¸€ç›®ã§ã‚ã‹ã‚‹æ©Ÿå™¨åˆ¥ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function svgUri(s) {
  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(s);
}

const ICONS = {
  // ãƒ«ãƒ¼ã‚¿ãƒ¼: ãƒœãƒƒã‚¯ã‚¹æœ¬ä½“ï¼‹2æœ¬ã‚¢ãƒ³ãƒ†ãƒŠï¼‹å‰é¢ãƒãƒ¼ãƒˆ
  gw: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <rect x="8" y="28" width="48" height="24" rx="4" fill="#92400e" stroke="#f97316" stroke-width="2.5"/>
    <line x1="20" y1="28" x2="20" y2="9" stroke="#f97316" stroke-width="3" stroke-linecap="round"/>
    <circle cx="20" cy="7" r="4" fill="#fb923c"/>
    <line x1="44" y1="28" x2="44" y2="9" stroke="#f97316" stroke-width="3" stroke-linecap="round"/>
    <circle cx="44" cy="7" r="4" fill="#fb923c"/>
    <circle cx="18" cy="40" r="3.5" fill="#4ade80"/>
    <circle cx="29" cy="40" r="3.5" fill="#4ade80"/>
    <circle cx="40" cy="40" r="3.5" fill="#fbbf24"/>
    <rect x="48" y="35" width="5" height="7" rx="1" fill="#f97316" opacity="0.8"/>
  </svg>`),

  // ãƒ©ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼: æ­£é¢ã‹ã‚‰è¦‹ãŸ3Uãƒ©ãƒƒã‚¯ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆå‰é¢ãƒ™ã‚¤ï¼‹LEDãƒ©ãƒ³ãƒ—ï¼‰
  server: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <rect x="5" y="5" width="54" height="54" rx="3" fill="#082f49" stroke="#0ea5e9" stroke-width="2"/>
    <rect x="9" y="10" width="46" height="13" rx="2" fill="#0369a1"/>
    <rect x="12" y="13" width="22" height="7" rx="1" fill="#082f49" opacity="0.8"/>
    <circle cx="50" cy="16.5" r="3" fill="#4ade80"/>
    <rect x="9" y="26" width="46" height="13" rx="2" fill="#0369a1"/>
    <rect x="12" y="29" width="22" height="7" rx="1" fill="#082f49" opacity="0.8"/>
    <circle cx="50" cy="32.5" r="3" fill="#4ade80"/>
    <rect x="9" y="42" width="46" height="13" rx="2" fill="#0369a1"/>
    <rect x="12" y="45" width="22" height="7" rx="1" fill="#082f49" opacity="0.8"/>
    <circle cx="50" cy="48.5" r="3" fill="#22d3ee"/>
  </svg>`),

  // L2ã‚¹ã‚¤ãƒƒãƒ: è–„å‹ãƒœãƒƒã‚¯ã‚¹ï¼‹å‰é¢ãƒãƒ¼ãƒˆåˆ—ï¼‹åŒæ–¹å‘çŸ¢å°
  switch: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <rect x="4" y="18" width="56" height="28" rx="4" fill="#14532d" stroke="#22c55e" stroke-width="2.5"/>
    <rect x="9" y="26" width="7" height="7" rx="1.5" fill="#22c55e"/>
    <rect x="19" y="26" width="7" height="7" rx="1.5" fill="#22c55e"/>
    <rect x="29" y="26" width="7" height="7" rx="1.5" fill="#4ade80"/>
    <rect x="39" y="26" width="7" height="7" rx="1.5" fill="#f87171"/>
    <circle cx="54" cy="29.5" r="4" fill="#4ade80"/>
    <path d="M17 14 L9 9 M17 14 L9 19" stroke="#22c55e" stroke-width="2.5" fill="none" stroke-linecap="round"/>
    <path d="M47 14 L55 9 M47 14 L55 19" stroke="#22c55e" stroke-width="2.5" fill="none" stroke-linecap="round"/>
  </svg>`),

  // ç„¡ç·šAP: æ¨™æº–WiFiã‚·ãƒ³ãƒœãƒ«ï¼ˆ3æ®µå¼§ï¼‹å°åº§ï¼‰èª°ã§ã‚‚ä¸€ç›®ã§ã‚ã‹ã‚‹
  ap: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <path d="M7 37 Q32 4 57 37" fill="none" stroke="#a855f7" stroke-width="3.5" stroke-linecap="round" opacity="0.3"/>
    <path d="M14 42 Q32 14 50 42" fill="none" stroke="#a855f7" stroke-width="3.5" stroke-linecap="round" opacity="0.6"/>
    <path d="M21 47 Q32 26 43 47" fill="none" stroke="#a855f7" stroke-width="4" stroke-linecap="round"/>
    <circle cx="32" cy="53" r="5.5" fill="#a855f7"/>
    <rect x="23" y="57" width="18" height="5" rx="2.5" fill="#3b0764" stroke="#a855f7" stroke-width="1.5"/>
  </svg>`),

  // è¤‡åˆæ©Ÿï¼ˆMFPï¼‰: ãƒ—ãƒªãƒ³ã‚¿ãƒ¼æœ¬ä½“ï¼‹çµ¦ç´™ãƒˆãƒ¬ã‚¤ï¼‹ç´™ãŒä¸Šã‹ã‚‰å‡ºã¦ãã‚‹å½¢
  mfp: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <rect x="16" y="4" width="32" height="22" rx="2" fill="#fdf4ff" stroke="#f9a8d4" stroke-width="1.2"/>
    <line x1="22" y1="10" x2="42" y2="10" stroke="#d8b4fe" stroke-width="1.5"/>
    <line x1="22" y1="14" x2="42" y2="14" stroke="#d8b4fe" stroke-width="1.5"/>
    <line x1="22" y1="18" x2="36" y2="18" stroke="#d8b4fe" stroke-width="1.5"/>
    <rect x="7" y="24" width="50" height="26" rx="4" fill="#831843" stroke="#ec4899" stroke-width="2"/>
    <rect x="13" y="31" width="38" height="5" rx="1" fill="#ec4899" opacity="0.5"/>
    <circle cx="51" cy="31" r="3.5" fill="#4ade80"/>
    <rect x="16" y="49" width="32" height="12" rx="2" fill="#831843" stroke="#ec4899" stroke-width="1.5"/>
  </svg>`),

  // å…¥é€€å®¤ã‚²ãƒ¼ãƒˆ: ãƒ•ãƒ©ãƒƒãƒ—ã‚²ãƒ¼ãƒˆï¼ˆå·¦å³ã®æŸ±ï¼‹æ¨ªãƒãƒ¼ï¼‹ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ï¼‰
  secom: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <rect x="3" y="10" width="12" height="52" rx="2.5" fill="#78350f" stroke="#f59e0b" stroke-width="2"/>
    <rect x="49" y="10" width="12" height="52" rx="2.5" fill="#78350f" stroke="#f59e0b" stroke-width="2"/>
    <rect x="6" y="14" width="6" height="12" rx="1.5" fill="#fbbf24" opacity="0.95"/>
    <circle cx="9" cy="20" r="2.5" fill="#78350f"/>
    <rect x="15" y="30" width="34" height="6" rx="3" fill="#f59e0b"/>
    <circle cx="9" cy="55" r="3.5" fill="#4ade80"/>
    <circle cx="55" cy="55" r="3.5" fill="#4ade80"/>
    <path d="M24 46 L40 46 M35.5 41 L40 46 L35.5 51" stroke="#4ade80" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`),

  // ä¸æ˜æ©Ÿå™¨: ã‚°ãƒ¬ãƒ¼ã®ãƒœãƒƒã‚¯ã‚¹ã«ã€Œ?ã€
  unknown: svgUri(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <rect x="6" y="6" width="52" height="52" rx="8" fill="#1e293b" stroke="#475569" stroke-width="2.5"/>
    <text x="32" y="46" text-anchor="middle" font-size="38" font-weight="bold" fill="#64748b" font-family="Arial,sans-serif">?</text>
  </svg>`),
};

// å‡¡ä¾‹ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¨­å®š
document.querySelectorAll('.leg-icon').forEach(img => {
  img.src = ICONS[img.dataset.type] || '';
});

const IMG_TYPES = new Set(['gw','server','switch','ap','mfp','secom','unknown']);

function n(id, label, type, meta, extra={}) {
  const c = C[type] || C.unknown;
  const useImg = IMG_TYPES.has(type) && ICONS[type] && !extra.shape;
  const base = {
    id, label,
    color: useImg
      ? { background:'rgba(0,0,0,0)', border:'rgba(0,0,0,0)', highlight:{background:'rgba(255,255,255,0.08)', border:c.border} }
      : { background:c.bg, border:c.border, highlight:{background:c.bg, border:'#f8fafc'} },
    font: { color:c.font, size:11, face:'Segoe UI,sans-serif', multi:false },
    borderWidth: 2,
    shadow: { enabled:true, size:6, x:0, y:3, color:'rgba(0,0,0,0.6)' },
    _meta: meta || {}
  };
  if (useImg) {
    base.shape = 'image';
    base.image = ICONS[type];
    base.size = 26;
  }
  return Object.assign(base, extra);
}

function edge(id, from, to, opts={}) {
  return Object.assign({ id, from, to, arrows:'to' }, opts);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// å¸¸æ™‚è¡¨ç¤ºãƒãƒ¼ãƒ‰
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const BASE_NODES = [
  n('internet', 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ\n(WAN)', 'internet',
    { desc:'å¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå›ç·š' },
    { shape:'ellipse', size:45, level:0 }),

  n('fortigate', 'FortiGate\n192.168.1.9\nVPNãƒãƒ– / å¢ƒç•ŒFW', 'fortigate',
    { ip:'192.168.1.9', desc:'å°å¸³å: VSR601j (VarioSecure)\nå®Ÿæ©Ÿ: Fortinet MAC 00:0d:48 æ¤œå‡º\nå°å¸³ã¨ã®ä¸ä¸€è‡´ â†’ è¦ãƒ­ã‚°ã‚¤ãƒ³ç¢ºèª\nå½¹å‰²: å…¨æ‹ ç‚¹VPNæ¥ç¶šãƒãƒ– / ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå¢ƒç•ŒFW' },
    { shape:'box', widthConstraint:{minimum:150}, margin:10, level:1 }),

  // â”€â”€ æ‹ ç‚¹ã‚µã‚¤ãƒˆ â”€â”€
  n('s-tokyo', 'ğŸ¢ æ±äº¬æœ¬ç¤¾\n192.168.1.x\nå°å¸³56ä»¶ / å¿œç­”10ä»¶', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nã‚¹ã‚­ãƒ£ãƒ³å¿œç­”ç‡: 10/56ä»¶\nVPNãƒãƒ–ã¨åŒä¸€æ‹ ç‚¹ï¼ˆLANç›´çµï¼‰' },
    { shape:'box', widthConstraint:{minimum:155}, margin:10, level:2 }),

  n('s-osaka', 'ğŸ¢ å¤§é˜ªå–¶æ¥­æ‰€\n192.168.20.x\n6æ©Ÿå™¨', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9ï¼ˆtracerouteç¢ºèªæ¸ˆã¿ï¼‰' },
    { shape:'box', widthConstraint:{minimum:140}, margin:10, level:2 }),

  n('s-hashimoto', 'ğŸ”¬ æ©‹æœ¬R&D\n192.168.30.x\nå°å¸³10ä»¶ / ä¸æ˜8ä»¶', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9 ç¢ºèªæ¸ˆã¿' },
    { shape:'box', widthConstraint:{minimum:140}, margin:10, level:2 }),

  n('s-fukuoka', 'ğŸ¢ ç¦å²¡å–¶æ¥­æ‰€\n192.168.40.x\n2æ©Ÿå™¨', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9 ç¢ºèªæ¸ˆã¿' },
    { shape:'box', widthConstraint:{minimum:135}, margin:10, level:2 }),

  n('s-wakayama', 'ğŸ¢ å’Œæ­Œå±±\n192.168.50.x\n7æ©Ÿå™¨ï¼ˆä¸æ˜2ä»¶ï¼‰', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9 ç¢ºèªæ¸ˆã¿' },
    { shape:'box', widthConstraint:{minimum:135}, margin:10, level:2 }),

  n('s-tsukiji', 'ğŸ­ å¤šæ‘©ã‚»ãƒ³ã‚¿ãƒ¼\n192.168.60.x\nå°å¸³12ä»¶ / ä¸æ˜15ä»¶', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9 ç¢ºèªæ¸ˆã¿\nä¸æ˜æ©Ÿå™¨å¤šæ•°ï¼ˆTTL64ç¾¤ è¦èª¿æŸ»ï¼‰\nVSRå: adtec-tamaï¼ˆ2026-03-01ç¢ºå®šï¼‰' },
    { shape:'box', widthConstraint:{minimum:145}, margin:10, level:2 }),

  n('s-kyobashi', 'ğŸ¢ äº¬æ©‹ãƒ“ãƒ«\n192.168.70.x\n2æ©Ÿå™¨', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9 ç¢ºèªæ¸ˆã¿' },
    { shape:'box', widthConstraint:{minimum:130}, margin:10, level:2 }),

  n('s-nagoya', 'ğŸ¢ åå¤å±‹\n192.168.80.x\n2æ©Ÿå™¨', 'site',
    { desc:'ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿå™¨ã‚’å±•é–‹/åç´\nVPNçµŒè·¯: Hop1=192.168.1.9 ç¢ºèªæ¸ˆã¿' },
    { shape:'box', widthConstraint:{minimum:130}, margin:10, level:2 }),
];

const BASE_EDGES = [
  edge('ei-fg', 'internet', 'fortigate', { label:'WAN', width:3, color:{color:'#6d28d9'}, font:{color:'#8b5cf6', size:11} }),
  edge('ef-tk', 'fortigate', 's-tokyo',    { label:'LAN\n192.168.1.x', width:2, color:{color:'#3b82f6'}, dashes:false, font:{color:'#60a5fa', size:11} }),
  edge('ef-os', 'fortigate', 's-osaka',    { label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
  edge('ef-hs', 'fortigate', 's-hashimoto',{ label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
  edge('ef-fk', 'fortigate', 's-fukuoka',  { label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
  edge('ef-wk', 'fortigate', 's-wakayama', { label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
  edge('ef-tj', 'fortigate', 's-tsukiji',  { label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
  edge('ef-kb', 'fortigate', 's-kyobashi', { label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
  edge('ef-ng', 'fortigate', 's-nagoya',   { label:'VPN', width:2, color:{color:'#475569'}, dashes:[8,4], font:{color:'#64748b',size:11} }),
];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// å±•é–‹æ™‚ãƒãƒ¼ãƒ‰ï¼ˆæ‹ ç‚¹ã”ã¨ï¼‰
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SITE_DATA = {

  // â”€â”€ æ±äº¬æœ¬ç¤¾ â”€â”€
  's-tokyo': {
    nodes: [
      n('tk-sw', 'DGS-1210-28\n192.168.1.8\nã‚¹ã‚¤ãƒƒãƒï¼ˆåŸºå¹¹HUBï¼‰', 'switch',
        { ip:'192.168.1.8', desc:'D-Link 28ãƒãƒ¼ãƒˆç®¡ç†ã‚¹ã‚¤ãƒƒãƒ\nç®¡ç†PW: ad-admin\nMAC OUI: D-Linkç¢ºèªï¼ˆå¿œç­”ã‚ã‚Šï¼‰\nç‰©ç†é…ç·šã¯ã‚¹ã‚­ãƒ£ãƒ³æœªç¢ºèª' },
        { level:3 }),

      n('tk-pdc', 'PDCSVR\n192.168.1.6\nActive Directory\nPrimary Domain Controller', 'server',
        { ip:'192.168.1.6', desc:'Active Directory Primary DCï¼ˆ2020å¹´9æœˆã€œï¼‰\nã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼245ä»¶ / æœ‰åŠ¹ãƒ¦ãƒ¼ã‚¶ãƒ¼128å\nç„¡åŠ¹43å / GPO14ä»¶ï¼ˆADèª¿æŸ» 2026-02-28ï¼‰\nOSæ¨å®š: Linux/NWæ©Ÿå™¨(TTL64)' },
        { level:4 }),

      n('tk-bdc', 'BDCSVR\n192.168.1.7\nActive Directory\nBackup Domain Controller', 'server',
        { ip:'192.168.1.7', desc:'Active Directory Backup DCï¼ˆ2020å¹´9æœˆã€œï¼‰\nOSæ¨å®š: Linux/NWæ©Ÿå™¨(TTL64)' },
        { level:4 }),

      n('tk-share', 'ADSHARESVR\n192.168.1.15\nãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒ', 'server',
        { ip:'192.168.1.15', desc:'ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒï¼ˆã‚¹ã‚­ãƒ£ãƒ³å¿œç­”ã‚ã‚Šï¼‰\nOSæ¨å®š: Linux/NWæ©Ÿå™¨(TTL64)' },
        { level:4 }),

      n('tk-kanri', 'ADKANRI4\n192.168.1.11\næ¥­å‹™ã‚µãƒ¼ãƒ', 'server',
        { ip:'192.168.1.11', desc:'2025/9/19 adkanri4ã«ç§»è¡Œæ¸ˆã¿\nã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ³ãƒã‚¤ãƒ»ãƒ‡ãƒ¼ã‚¿ä¿ç®¡\nOSæ¨å®š: Windows PC(TTL128)' },
        { level:4 }),

      n('tk-ten', 'TENAPSVR / TENDBSVR\n.1.12 / .1.14\nTENSUITEï¼ˆå‹¤æ€ ï¼‰', 'server',
        { ip:'192.168.1.12 / .14', desc:'TENSUITEã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ (.12)\nTENSUITEãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ (.14)\niLOç®¡ç†IP: .16 / .17\nåŸºå¹¹å¼•ãç¶™ãå¾…ã¡ãƒ»ä¿ç•™ä¸­ï¼ˆå¿œç­”ãªã—ï¼‰' },
        { level:4 }),

      n('tk-trii', 'TRIISVR\n192.168.1.30\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.1.30', desc:'SESAMO-TRIIã‚µãƒ¼ãƒï¼ˆã‚»ã‚³ãƒ å…¥é€€å®¤ã‚·ã‚¹ãƒ†ãƒ ï¼‰\nOSæ¨å®š: Linux/NWæ©Ÿå™¨(TTL64)\nâ€»ADæ®‹å­˜å»ƒæ£„å€™è£œï¼ˆè¦ç¢ºèªï¼‰' },
        { level:4 }),

      n('tk-ap', 'ç„¡ç·šAP Ã— 6\n.1.40 /.41 /.42 /.43 /.44 /.45\nå„ãƒ•ãƒ­ã‚¢ï¼ˆ9F/8F/7F/6Fï¼‰', 'ap',
        { ip:'192.168.1.40ã€œ45', desc:'9FåŸ·å‹™å®¤ (.40) âœ…\n8Fä¼šè­°å®¤ (.41) âŒ å»ƒæ£„æ¸ˆã¿\n7FåŸ·å‹™å®¤ (.42) âŒ\n7Fä¼šè­°å®¤ (.43) âŒ SSID: Yoko7F-meeting\n6FåŸ·å‹™å®¤ (.44) âŒ SSID: Yoko6F-office\n6Fä¼šè­°å®¤ (.45) âŒ SSID: Yoko6F-entrance' },
        { level:4 }),

      n('tk-mfp', 'RICOH IM C4500 / MP C4504\n.1.55 / .1.56\nè¤‡åˆæ©Ÿï¼ˆ6F / 7Fï¼‰', 'mfp',
        { ip:'192.168.1.55 / .56', desc:'6Fã‚«ãƒ©ãƒ¼è¤‡åˆæ©Ÿ (.55) âœ… RICOH IM C4500 JPN RPCS\n7Fã‚«ãƒ©ãƒ¼è¤‡åˆæ©Ÿ (.56) âœ… RICOH MP C4504 SPF\nä»˜å±: OpenBlocks AX3 (.57) ç”¨é€”ä¸æ˜ãƒ»è¦å»ƒæ£„æ¤œè¨' },
        { level:4 }),
    ],
    edges: [
      edge('etk-sw',   's-tokyo',  'tk-sw',    { width:2, color:{color:'#22c55e'} }),
      edge('etk-pdc',  'tk-sw',    'tk-pdc',   { color:{color:'#0ea5e9'} }),
      edge('etk-bdc',  'tk-sw',    'tk-bdc',   { color:{color:'#0ea5e9'} }),
      edge('etk-shr',  'tk-sw',    'tk-share',  { color:{color:'#0ea5e9'} }),
      edge('etk-kan',  'tk-sw',    'tk-kanri',  { color:{color:'#0ea5e9'} }),
      edge('etk-ten',  'tk-sw',    'tk-ten',    { color:{color:'#0ea5e9'} }),
      edge('etk-trii', 'tk-sw',    'tk-trii',   { color:{color:'#f59e0b'} }),
      edge('etk-ap',   'tk-sw',    'tk-ap',     { color:{color:'#a855f7'} }),
      edge('etk-mfp',  'tk-sw',    'tk-mfp',    { color:{color:'#ec4899'} }),
    ]
  },

  // â”€â”€ å¤§é˜ªå–¶æ¥­æ‰€ â”€â”€
  's-osaka': {
    nodes: [
      n('os-gw', 'VSR401j\n192.168.20.1\nVPN GW', 'gw',
        { ip:'192.168.20.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰\nã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆé€šä¿¡ãƒ»æ‹ ç‚¹é–“é€šä¿¡\nVPNçµŒè·¯: Hop1=192.168.1.9ï¼ˆtracerouteç¢ºèªï¼‰' },
        { level:3 }),
      n('os-ap1', 'WAB-I1750PS\n192.168.20.21\nç„¡ç·šAPï¼ˆåŸ·å‹™å®¤ï¼‰', 'ap',
        { ip:'192.168.20.21', desc:'ç„¡ç·šLANè¦ªæ©Ÿï¼ˆåŸ·å‹™å®¤ï¼‰\nç®¡ç†: admin / ggs18zyeï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('os-ap2', 'WAB-I1750PS\n192.168.20.22\nç„¡ç·šAPï¼ˆä¼šè­°å®¤ï¼‰', 'ap',
        { ip:'192.168.20.22', desc:'ç„¡ç·šLANè¦ªæ©Ÿï¼ˆä¼šè­°å®¤ï¼‰\nç®¡ç†: admin / ggs18zyeï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('os-trii', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.20.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.20.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('os-mfp', 'RICOH IM C3010\n192.168.20.50\nè¤‡åˆæ©Ÿ', 'mfp',
        { ip:'192.168.20.50', desc:'RICOH IM C3010ï¼ˆå¿œç­”ã‚ã‚Šï¼‰\nç®¡ç†: admin / PW ãªã—' },
        { level:4 }),
      n('os-unk', 'å°å¸³æœªç™»éŒ²\n192.168.20.70\n(DHCPãƒ»ç”°ä¸­æ°PC)', 'unknown',
        { ip:'192.168.20.70', desc:'OSæ¨å®š: Linux(TTL64)\næƒ…ã‚·ã‚¹å›ç­”: DHCPãƒ»ç”°ä¸­æ°PCã¨åˆ¤æ˜' },
        { level:4 }),
    ],
    edges: [
      edge('eos-gw',   's-osaka', 'os-gw',   { width:2, color:{color:'#f97316'} }),
      edge('eos-ap1',  'os-gw',   'os-ap1',  { color:{color:'#a855f7'} }),
      edge('eos-ap2',  'os-gw',   'os-ap2',  { color:{color:'#a855f7'} }),
      edge('eos-trii', 'os-gw',   'os-trii', { color:{color:'#f59e0b'} }),
      edge('eos-mfp',  'os-gw',   'os-mfp',  { color:{color:'#ec4899'} }),
      edge('eos-unk',  'os-gw',   'os-unk',  { color:{color:'#475569'} }),
    ]
  },

  // â”€â”€ æ©‹æœ¬R&D â”€â”€
  's-hashimoto': {
    nodes: [
      n('hs-gw', 'VSR400\n192.168.30.1\nVPN GW', 'gw',
        { ip:'192.168.30.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰' },
        { level:3 }),
      n('hs-qnap', 'QNAP TS-431U\n192.168.30.10\nNAS', 'server',
        { ip:'192.168.30.10', desc:'IoT ENGç”¨ãƒ‡ãƒ¼ã‚¿ä¿ç®¡å…±æœ‰ç”¨ã‚µãƒ¼ãƒï¼ˆå¿œç­”ã‚ã‚Šï¼‰\nãƒ¦ãƒ¼ã‚¶ãƒ¼: admin' },
        { level:4 }),
      n('hs-iot', 'IOTSVR\n192.168.30.15\nIoTå°‚ç”¨FS', 'server',
        { ip:'192.168.30.15', desc:'IoTäº‹æ¥­éƒ¨å°‚ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒï¼ˆ2020å¹´10æœˆã€œï¼‰\nBMC (.16): å¿œç­”ã‚ã‚Š\nOSæ¨å®š: Windows PC(TTL128)' },
        { level:4 }),
      n('hs-ap', 'WAB-M1775-PS\n192.168.30.20\nç„¡ç·šAP', 'ap',
        { ip:'192.168.30.20', desc:'ç„¡ç·šAPï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('hs-trii', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.30.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.30.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('hs-mfp', 'Canon C5540â…¡\n192.168.30.55\nè¤‡åˆæ©Ÿ', 'mfp',
        { ip:'192.168.30.55', desc:'æ—§R&D 8F æŠ€è¡“ãƒ»å“è¨¼ãƒ»IoTã®è¤‡åˆæ©Ÿï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('hs-unk', 'å°å¸³æœªç™»éŒ² Ã— 8\n.82/.87/.89/.91/.92/.162/.173/.204\nè¦èª¿æŸ»', 'unknown',
        { ip:'192.168.30.82ã€œ204ï¼ˆ8å°ï¼‰', desc:'OSæ¨å®š: Windows(TTL128) Ã— 3å°\nOSæ¨å®š: Linux/FortiGate(TTL64) Ã— 5å°\nå°å¸³æœªç™»éŒ² â†’ æƒ…ã‚·ã‚¹ç¢ºèªè¦' },
        { level:4 }),
    ],
    edges: [
      edge('ehs-gw',   's-hashimoto', 'hs-gw',   { width:2, color:{color:'#f97316'} }),
      edge('ehs-qnap', 'hs-gw',       'hs-qnap', { color:{color:'#0ea5e9'} }),
      edge('ehs-iot',  'hs-gw',       'hs-iot',  { color:{color:'#0ea5e9'} }),
      edge('ehs-ap',   'hs-gw',       'hs-ap',   { color:{color:'#a855f7'} }),
      edge('ehs-trii', 'hs-gw',       'hs-trii', { color:{color:'#f59e0b'} }),
      edge('ehs-mfp',  'hs-gw',       'hs-mfp',  { color:{color:'#ec4899'} }),
      edge('ehs-unk',  'hs-gw',       'hs-unk',  { color:{color:'#475569'} }),
    ]
  },

  // â”€â”€ ç¦å²¡å–¶æ¥­æ‰€ â”€â”€
  's-fukuoka': {
    nodes: [
      n('fk-gw', 'VSR401j\n192.168.40.1\nVPN GW', 'gw',
        { ip:'192.168.40.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰' },
        { level:3 }),
      n('fk-trii', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.40.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.40.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
    ],
    edges: [
      edge('efk-gw',   's-fukuoka', 'fk-gw',   { width:2, color:{color:'#f97316'} }),
      edge('efk-trii', 'fk-gw',     'fk-trii', { color:{color:'#f59e0b'} }),
    ]
  },

  // â”€â”€ å’Œæ­Œå±± â”€â”€
  's-wakayama': {
    nodes: [
      n('wk-gw', 'VSR401j\n192.168.50.1\nVPN GW', 'gw',
        { ip:'192.168.50.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰' },
        { level:3 }),
      n('wk-trii1', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.50.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.50.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('wk-s2', 'ã‚»ã‚µãƒ¢Idfï¼ˆé™è„ˆï¼‰å†…å´\n192.168.50.32', 'secom',
        { ip:'192.168.50.32', desc:'ã‚»ã‚³ãƒ å…¥é€€å®¤ã‚·ã‚¹ãƒ†ãƒ å†…å´ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('wk-s3', 'ã‚»ã‚µãƒ¢Idfï¼ˆé™è„ˆï¼‰å¤–å´\n192.168.50.33', 'secom',
        { ip:'192.168.50.33', desc:'ã‚»ã‚³ãƒ å…¥é€€å®¤ã‚·ã‚¹ãƒ†ãƒ å¤–å´ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('wk-trii2', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.50.34\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.50.34', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('wk-unk', 'å°å¸³æœªç™»éŒ² Ã— 2\n.35 / .36\næƒ…ã‚·ã‚¹æœªå›ç­”', 'unknown',
        { ip:'192.168.50.35 / .36', desc:'OSæ¨å®š: Networkæ©Ÿå™¨(TTL255)\nå°å¸³æœªç™»éŒ² / æƒ…ã‚·ã‚¹æœªå›ç­”ï¼ˆè¦å¯¾å¿œï¼‰' },
        { level:4 }),
    ],
    edges: [
      edge('ewk-gw',    's-wakayama', 'wk-gw',    { width:2, color:{color:'#f97316'} }),
      edge('ewk-trii1', 'wk-gw',      'wk-trii1', { color:{color:'#f59e0b'} }),
      edge('ewk-s2',    'wk-gw',      'wk-s2',    { color:{color:'#f59e0b'} }),
      edge('ewk-s3',    'wk-gw',      'wk-s3',    { color:{color:'#f59e0b'} }),
      edge('ewk-trii2', 'wk-gw',      'wk-trii2', { color:{color:'#f59e0b'} }),
      edge('ewk-unk',   'wk-gw',      'wk-unk',   { color:{color:'#475569'} }),
    ]
  },

  // â”€â”€ å¤šæ‘©ã‚»ãƒ³ã‚¿ãƒ¼ â”€â”€
  's-tsukiji': {
    nodes: [
      n('tj-gw', 'VSR400\n192.168.60.1\nVPN GW', 'gw',
        { ip:'192.168.60.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰' },
        { level:3 }),
      n('tj-ap', 'WAB-M1775-PS Ã— 7\n.60.20ã€œ.26\nç„¡ç·šAPï¼ˆå„ãƒ•ãƒ­ã‚¢ï¼‰', 'ap',
        { ip:'192.168.60.20ã€œ26', desc:'1Fä¼šè­°å®¤ (.20) SSID: Tama1F-meeting\n1Fç‰©æµ (.21) SSID: Tama1F-logistics\n2Fæ¤œæŸ»å®¤ä»˜è¿‘ (.22) SSID: Tama2F-laboratory\n2FåŸ·å‹™å®¤ (.23) SSID: Tama2F-office\n3Fç‰©æµ (.24) SSID: Tama3F\n2Fæ¤œæŸ»å®¤éšæ®µ (.25)\n2Fä¼šè­°å®¤ (.26)\nå…¨å°å¿œç­”ã‚ã‚Š' },
        { level:4 }),
      n('tj-trii', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.60.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.60.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('tj-mfp1', 'SHARP BP-50C55\n192.168.60.54\n1F è¤‡åˆæ©Ÿ', 'mfp',
        { ip:'192.168.60.54', desc:'å¤šæ‘©1Fè¤‡åˆæ©Ÿï¼ˆ2025å¹´10æœˆå°å…¥ï¼‰\nãƒ¦ãƒ¼ã‚¶ãƒ¼ID: adminï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('tj-mfp2', 'IR-ADVC3730F\n192.168.60.55\n2F è¤‡åˆæ©Ÿ', 'mfp',
        { ip:'192.168.60.55', desc:'å¤šæ‘©2Fè¤‡åˆæ©Ÿï¼ˆå…ƒCRBå…«ç‹å­ã®è¤‡åˆæ©Ÿï¼‰ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
      n('tj-unk', 'å°å¸³æœªç™»éŒ² Ã— 15\n(.71/.85/.91ã€œ.97/.161ã€œ.201)\nè¦èª¿æŸ»', 'unknown',
        { ip:'192.168.60.71ã€œ201ï¼ˆ15å°ï¼‰', desc:'OSæ¨å®š: Linux/FortiGate(TTL64) Ã— 10å°\nOSæ¨å®š: Windows(TTL128) Ã— 2å°\nOSæ¨å®š: Networkæ©Ÿå™¨(TTL255) Ã— 3å°\nä¸€éƒ¨ã¯æƒ…ã‚·ã‚¹ç¢ºèª: DHCPãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆPC\næ®‹ã‚Šã¯æœªç¢ºèªï¼ˆè¦èª¿æŸ»ï¼‰' },
        { level:4 }),
    ],
    edges: [
      edge('etj-gw',   's-tsukiji', 'tj-gw',   { width:2, color:{color:'#f97316'} }),
      edge('etj-ap',   'tj-gw',     'tj-ap',   { color:{color:'#a855f7'} }),
      edge('etj-trii', 'tj-gw',     'tj-trii', { color:{color:'#f59e0b'} }),
      edge('etj-mfp1', 'tj-gw',     'tj-mfp1', { color:{color:'#ec4899'} }),
      edge('etj-mfp2', 'tj-gw',     'tj-mfp2', { color:{color:'#ec4899'} }),
      edge('etj-unk',  'tj-gw',     'tj-unk',  { color:{color:'#475569'} }),
    ]
  },

  // â”€â”€ äº¬æ©‹ãƒ“ãƒ« â”€â”€
  's-kyobashi': {
    nodes: [
      n('kb-gw', 'VSR401j\n192.168.70.1\nVPN GW', 'gw',
        { ip:'192.168.70.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰' },
        { level:3 }),
      n('kb-trii', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.70.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.70.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
    ],
    edges: [
      edge('ekb-gw',   's-kyobashi', 'kb-gw',   { width:2, color:{color:'#f97316'} }),
      edge('ekb-trii', 'kb-gw',      'kb-trii', { color:{color:'#f59e0b'} }),
    ]
  },

  // â”€â”€ åå¤å±‹ â”€â”€
  's-nagoya': {
    nodes: [
      n('ng-gw', 'VSR401j\n192.168.80.1\nVPN GW', 'gw',
        { ip:'192.168.80.1', desc:'VPNãƒ«ãƒ¼ã‚¿ï¼ˆVarioSecure VSRï¼‰' },
        { level:3 }),
      n('ng-trii', 'TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n192.168.80.31\nSECOMå…¥é€€å®¤', 'secom',
        { ip:'192.168.80.31', desc:'SESAMO-TRIIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¿œç­”ã‚ã‚Šï¼‰' },
        { level:4 }),
    ],
    edges: [
      edge('eng-gw',   's-nagoya', 'ng-gw',   { width:2, color:{color:'#f97316'} }),
      edge('eng-trii', 'ng-gw',    'ng-trii', { color:{color:'#f59e0b'} }),
    ]
  },
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// vis-network åˆæœŸåŒ–
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const nodes = new vis.DataSet(BASE_NODES);
const edges = new vis.DataSet(BASE_EDGES);
const expanded = {};

const container = document.getElementById('mynetwork');
const network = new vis.Network(container, { nodes, edges }, {
  layout: {
    hierarchical: {
      enabled: true,
      direction: 'UD',
      sortMethod: 'directed',
      levelSeparation: 160,
      nodeSpacing: 210,
      treeSpacing: 270,
      blockShifting: true,
      edgeMinimization: true,
      parentCentralization: true,
    }
  },
  physics: { enabled: false },
  interaction: {
    hover: true,
    tooltipDelay: 0,
    navigationButtons: false,
    keyboard: false,
    zoomView: true,
    dragView: true,
  },
  edges: {
    smooth: { type:'cubicBezier', forceDirection:'vertical', roundness:0.5 },
    font: { align:'middle', size:11, color:'#64748b', strokeWidth:2, strokeColor:'#0f172a' },
    arrowStrikethrough: false,
  },
  nodes: {
    borderWidth: 2,
    borderWidthSelected: 3,
    chosen: {
      node: function(values) { values.borderWidth = 3; }
    }
  }
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ã‚¯ãƒªãƒƒã‚¯: å±•é–‹ / åç´
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
network.on('click', function(p) {
  if (p.nodes.length === 0) return;
  const id = p.nodes[0];
  const sd = SITE_DATA[id];
  if (!sd) return;

  if (expanded[id]) {
    nodes.remove(sd.nodes.map(n => n.id));
    edges.remove(sd.edges.map(e => e.id));
    expanded[id] = false;
  } else {
    nodes.add(sd.nodes);
    edges.add(sd.edges);
    expanded[id] = true;
  }
  setTimeout(() => network.fit({ animation:{ duration:600, easingFunction:'easeInOutQuad' } }), 80);
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ãƒ›ãƒãƒ¼: æƒ…å ±ãƒ‘ãƒãƒ«
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
network.on('hoverNode', function(p) {
  const nd = nodes.get(p.node);
  if (!nd || !nd._meta) return;
  const m = nd._meta;

  document.getElementById('info-title').textContent = nd.label.split('\n')[0];

  let html = '';
  if (m.ip)   html += `<div class="row"><b>IP:</b><span>${m.ip}</span></div>`;
  if (m.desc) html += `<div class="row"><b>è©³ç´°:</b><span style="white-space:pre-line">${m.desc}</span></div>`;
  if (SITE_DATA[p.node]) {
    const state = expanded[p.node] ? 'å±•é–‹ä¸­ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§åç´ï¼‰' : 'åç´ä¸­ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ï¼‰';
    html += `<div class="row"><b>çŠ¶æ…‹:</b><span>${state}</span></div>`;
  }

  document.getElementById('info-body').innerHTML = html;
  document.getElementById('info').style.display = 'block';
});

// åˆæœŸè¡¨ç¤º
network.fit();
</script>
</body>
</html>
